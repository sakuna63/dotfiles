#!/usr/bin/env bash

# ~/.osx — https://mths.be/osx

# Ask for the administrator password upfront
sudo -v

# Keep-alive: update existing `sudo` time stamp until `.osx` has finished
while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

###############################################################################
# General UI/UX                                                               #
###############################################################################

# Disable the sound effects on boot
sudo nvram SystemAudioVolume=" "

# Disable transparency in the menu bar and elsewhere on Yosemite
defaults write com.apple.universalaccess reduceTransparency -bool true

# Menu bar: hide the Time Machine, Volume, and User icons
for domain in ~/Library/Preferences/ByHost/com.apple.systemuiserver.*; do
  defaults write "${domain}" dontAutoLoad -array \
    "/System/Library/CoreServices/Menu Extras/Volume.menu" \
    "/System/Library/CoreServices/Menu Extras/AirPort.menu" \
    "/System/Library/CoreServices/Menu Extras/User.menu"
done
defaults write com.apple.systemuiserver menuExtras -array \
  "/System/Library/CoreServices/Menu Extras/Bluetooth.menu" \
  "/System/Library/CoreServices/Menu Extras/Battery.menu" \
  "/System/Library/CoreServices/Menu Extras/Clock.menu"

# Set sidebar icon size to medium
defaults write NSGlobalDomain NSTableViewDefaultSizeMode -int 1

# Increase window resize speed for Cocoa applications
defaults write NSGlobalDomain NSWindowResizeTime -float 0.001

# Expand save panel by default
# What is save panel? -> http://i.stack.imgur.com/kNuyN.jpg
defaults write NSGlobalDomain NSNavPanelExpandedStateForSaveMode -bool true
defaults write NSGlobalDomain NSNavPanelExpandedStateForSaveMode2 -bool true

# Expand print panel by default
defaults write NSGlobalDomain PMPrintingExpandedStateForPrint -bool true
defaults write NSGlobalDomain PMPrintingExpandedStateForPrint2 -bool true

# Automatically quit printer app once the print jobs complete
defaults write com.apple.print.PrintingPrefs "Quit When Finished" -bool true

# Disable the “Are you sure you want to open this application?” dialog
defaults write com.apple.LaunchServices LSQuarantine -bool false

# Disable the crash reporter
defaults write com.apple.CrashReporter DialogType -string "none"

# Set Help Viewer windows to non-floating mode
defaults write com.apple.helpviewer DevMode -bool true

# Reveal IP address, hostname, OS version, etc. when clicking the clock
# in the login window
sudo defaults write /Library/Preferences/com.apple.loginwindow AdminHostInfo HostName

# Restart automatically if the computer freezes
sudo systemsetup -setrestartfreeze on

# Check for software updates daily, not just once per week
defaults write com.apple.SoftwareUpdate ScheduleFrequency -int 1

# Disable Notification Center and remove the menu bar icon
# launchctl unload -w /System/Library/LaunchAgents/com.apple.notificationcenterui.plist 2> /dev/null

# Disable smart quotes as they’re annoying when typing code
defaults write NSGlobalDomain NSAutomaticQuoteSubstitutionEnabled -bool false

# Disable smart dashes as they’re annoying when typing code
defaults write NSGlobalDomain NSAutomaticDashSubstitutionEnabled -bool false

###############################################################################
# SSD-specific tweaks                                                         #
###############################################################################

# Disable local Time Machine snapshots
sudo tmutil disablelocal

# Disable hibernation (speeds up entering sleep mode)
sudo pmset -a hibernatemode 0

# Remove the sleep image file to save disk space
# sudo rm /Private/var/vm/sleepimage
# Create a zero-byte file instead…
# sudo touch /Private/var/vm/sleepimage
# …and make sure it can’t be rewritten
# sudo chflags uchg /Private/var/vm/sleepimage

# Disable the sudden motion sensor as it’s not useful for SSDs
sudo pmset -a sms 0

###############################################################################
# Trackpad, mouse, keyboard, Bluetooth accessories, and input                 #
###############################################################################

# for trackpad gesture
defaults write com.apple.driver.AppleMultitouchTrackpad TrackpadFourFingerPinchGesture -int 2
defaults write com.apple.driver.AppleMultitouchTrackpad TrackpadFourFingerVertSwipeGesture -int 2
defaults write com.apple.driver.AppleMultitouchTrackpad TrackpadThreeFingerDrag -int 1
defaults write com.apple.driver.AppleMultitouchTrackpad TrackpadThreeFingerTapGesture -int 2

# Enable tap to click (Trackpad) for this user and for the login screen
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -bool true
defaults -currentHost write NSGlobalDomain com.apple.mouse.tapBehavior -int 1
defaults write NSGlobalDomain com.apple.mouse.tapBehavior -int 1

# Increase sound quality for Bluetooth headphones/headsets
defaults write com.apple.BluetoothAudioAgent "Apple Bitpool Min (editable)" -int 40

# Enable full keyboard access for all controls
# (e.g. enable Tab in modal dialogs)
defaults write NSGlobalDomain AppleKeyboardUIMode -int 3

# Use scroll gesture with the Ctrl (^) modifier key to zoom
defaults write com.apple.universalaccess closeViewScrollWheelToggle -bool true
defaults write com.apple.universalaccess HIDScrollZoomModifierMask -int 262144
# Follow the keyboard focus while zoomed in
defaults write com.apple.universalaccess closeViewZoomFollowsFocus -bool true

# Disable press-and-hold for keys in favor of key repeat
defaults write NSGlobalDomain ApplePressAndHoldEnabled -bool false

# Set a blazingly fast keyboard repeat rate
defaults write NSGlobalDomain KeyRepeat -int 2

# Set the timezone; see `sudo systemsetup -listtimezones` for other values
sudo systemsetup -settimezone "Europe/Brussels" > /dev/null

# Disable auto-correct
# defaults write NSGlobalDomain NSAutomaticSpellingCorrectionEnabled -bool false

# Stop iTunes from responding to the keyboard media keys
launchctl unload -w /System/Library/LaunchAgents/com.apple.rcd.plist 2> /dev/null

###############################################################################
# Screen                                                                      #
###############################################################################

# Require password immediately after sleep or screen saver begins
defaults write com.apple.screensaver askForPassword -int 1
defaults write com.apple.screensaver askForPasswordDelay -int 0

# Save screenshots to the downloads
defaults write com.apple.screencapture location -string "${HOME}/Downloads"

# Save screenshots in PNG format (other options: BMP, GIF, JPG, PDF, TIFF)
defaults write com.apple.screencapture type -string "png"

# Disable shadow in screenshots
defaults write com.apple.screencapture disable-shadow -bool true

# Enable subpixel font rendering on non-Apple LCDs
defaults write NSGlobalDomain AppleFontSmoothing -int 2

# Enable HiDPI display modes (requires restart)
sudo defaults write /Library/Preferences/com.apple.windowserver DisplayResolutionEnabled -bool true

###############################################################################
# Finder                                                                      #
###############################################################################

# Finder: allow quitting via ⌘ + Q; doing so will also hide desktop icons
defaults write com.apple.finder QuitMenuItem -bool true

# Finder: disable window animations and Get Info animations
defaults write com.apple.finder DisableAllAnimations -bool true

# Set home directory as the default location for new Finder windows
defaults write com.apple.finder NewWindowTarget -string "PfHm"
defaults write com.apple.finder NewWindowTargetPath -string "file://${HOME}/"

# Finder: show hidden files by default
defaults write com.apple.finder AppleShowAllFiles -bool true

# Finder: show all filename extensions
defaults write NSGlobalDomain AppleShowAllExtensions -bool true

# Finder: show status bar
defaults write com.apple.finder ShowStatusBar -bool true

# Finder: show path bar
defaults write com.apple.finder ShowPathbar -bool true

# Finder: allow text selection in Quick Look
defaults write com.apple.finder QLEnableTextSelection -bool true

# Display full POSIX path as Finder window title
defaults write com.apple.finder _FXShowPosixPathInTitle -bool true

# When performing a search, search the current folder by default
defaults write com.apple.finder FXDefaultSearchScope -string "SCcf"

# Disable the warning when changing a file extension
defaults write com.apple.finder FXEnableExtensionChangeWarning -bool false

# Enable spring loading for directories
defaults write NSGlobalDomain com.apple.springing.enabled -bool true

# Remove the spring loading delay for directories
defaults write NSGlobalDomain com.apple.springing.delay -float 0

# Avoid creating .DS_Store files on network volumes
defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true

# Disable disk image verification
defaults write com.apple.frameworks.diskimages skip-verify -bool true
defaults write com.apple.frameworks.diskimages skip-verify-locked -bool true
defaults write com.apple.frameworks.diskimages skip-verify-remote -bool true

# Use list view in all Finder windows by default
# Four-letter codes for the other view modes: `icnv`, `clmv`, `Flwv`
defaults write com.apple.finder FXPreferredViewStyle -string "Nlsv"

# Disable the warning before emptying the Trash
defaults write com.apple.finder WarnOnEmptyTrash -bool false

# Empty Trash securely by default
defaults write com.apple.finder EmptyTrashSecurely -bool true

# Enable AirDrop over Ethernet and on unsupported Macs running Lion
defaults write com.apple.NetworkBrowser BrowseAllInterfaces -bool true

# Enable the MacBook Air SuperDrive on any Mac
sudo nvram boot-args="mbasd=1"

# Show the ~/Library folder
chflags nohidden ~/Library

# Remove Dropbox’s green checkmark icons in Finder
# file=/Applications/Dropbox.app/Contents/Resources/emblem-dropbox-uptodate.icns
# [ -e "${file}" ] && mv -f "${file}" "${file}.bak"

# Expand the following File Info panes:
# “General”, “Open with”, and “Sharing & Permissions”
defaults write com.apple.finder FXInfoPanesExpanded -dict \
  General -bool true \
  OpenWith -bool true \
  Privileges -bool true

###############################################################################
# Dock, Dashboard                                            #
###############################################################################

# Enable highlight hover effect for the grid view of a stack (Dock)
defaults write com.apple.dock mouse-over-hilite-stack -bool true

# Set the icon size of Dock items to 36 pixels
defaults write com.apple.dock tilesize -int 36
defaults write com.apple.dock largesize -int 54
defaults write com.apple.dock magnification -bool true

# Dock position
defaults write com.apple.dock orientation -string "right"

# Change minimize/maximize window effect
defaults write com.apple.dock mineffect -string "scale"

# Minimize windows into their application’s icon
defaults write com.apple.dock minimize-to-application -bool true

# Don’t animate opening applications from the Dock
defaults write com.apple.dock launchanim -bool false

# Speed up Mission Control animations
defaults write com.apple.dock expose-animation-duration -float 0

# Don’t group windows by application in Mission Control
# (i.e. use the old Exposé behavior instead)
defaults write com.apple.dock expose-group-by-app -bool false

# Disable Dashboard
defaults write com.apple.dashboard mcx-disabled -bool true

# Don’t show Dashboard as a Space
defaults write com.apple.dock dashboard-in-overlay -bool true

# Don’t automatically rearrange Spaces based on most recent use
defaults write com.apple.dock mru-spaces -bool false

# Remove the auto-hiding Dock delay
defaults write com.apple.dock autohide-delay -float 0

# Remove the animation when hiding/showing the Dock
defaults write com.apple.dock autohide-time-modifier -float 0

# Automatically hide and show the Dock
defaults write com.apple.dock autohide -bool true

# Make Dock icons of hidden applications translucent
defaults write com.apple.dock showhidden -bool true

###############################################################################
# Security                                                                    #
###############################################################################

# allow launch downloaded applications
sudo spctl --master-disable

###############################################################################
# Spotlight                                                                   #
###############################################################################

# Hide Spotlight tray-icon (and subsequent helper)
#sudo chmod 600 /System/Library/CoreServices/Search.bundle/Contents/MacOS/Search
# Disable Spotlight indexing for any volume that gets mounted and has not yet
# been indexed before.
# Use `sudo mdutil -i off "/Volumes/foo"` to stop indexing any volume.
sudo defaults write /.Spotlight-V100/VolumeConfiguration Exclusions -array "/Volumes"
# Change indexing order and disable some search results
# Yosemite-specific search results (remove them if your are using OS X 10.9 or older):
#   MENU_DEFINITION
#   MENU_CONVERSION
#   MENU_EXPRESSION
#   MENU_SPOTLIGHT_SUGGESTIONS (send search queries to Apple)
#   MENU_WEBSEARCH             (send search queries to Apple)
#   MENU_OTHER

defaults write com.apple.spotlight orderedItems -array \
  '{"enabled" = 1;"name" = "APPLICATIONS";}' \
  '{"enabled" = 1;"name" = "SYSTEM_PREFS";}' \
  '{"enabled" = 1;"name" = "DIRECTORIES";}' \
  '{"enabled" = 1;"name" = "PDF";}' \
  '{"enabled" = 1;"name" = "FONTS";}' \
  '{"enabled" = 0;"name" = "DOCUMENTS";}' \
  '{"enabled" = 0;"name" = "MESSAGES";}' \
  '{"enabled" = 0;"name" = "CONTACT";}' \
  '{"enabled" = 0;"name" = "EVENT_TODO";}' \
  '{"enabled" = 0;"name" = "IMAGES";}' \
  '{"enabled" = 0;"name" = "BOOKMARKS";}' \
  '{"enabled" = 0;"name" = "MUSIC";}' \
  '{"enabled" = 0;"name" = "MOVIES";}' \
  '{"enabled" = 0;"name" = "PRESENTATIONS";}' \
  '{"enabled" = 0;"name" = "SPREADSHEETS";}' \
  '{"enabled" = 0;"name" = "SOURCE";}' \
  '{"enabled" = 0;"name" = "MENU_DEFINITION";}' \
  '{"enabled" = 0;"name" = "MENU_OTHER";}' \
  '{"enabled" = 0;"name" = "MENU_CONVERSION";}' \
  '{"enabled" = 0;"name" = "MENU_EXPRESSION";}' \
  '{"enabled" = 0;"name" = "MENU_WEBSEARCH";}' \
  '{"enabled" = 0;"name" = "MENU_SPOTLIGHT_SUGGESTIONS";}'
# Load new settings before rebuilding the index
killall mds > /dev/null 2>&1
# Make sure indexing is enabled for the main volume
sudo mdutil -i on / > /dev/null
# Rebuild the index from scratch
sudo mdutil -E / > /dev/null

###############################################################################
# Time Machine                                                                #
###############################################################################

# Prevent Time Machine from prompting to use new hard drives as backup volume
defaults write com.apple.TimeMachine DoNotOfferNewDisksForBackup -bool true

# Disable local Time Machine backups
hash tmutil &> /dev/null && sudo tmutil disablelocal

###############################################################################
# Activity Monitor                                                            #
###############################################################################

# Show the main window when launching Activity Monitor
defaults write com.apple.ActivityMonitor OpenMainWindow -bool true

# Visualize CPU usage in the Activity Monitor Dock icon
defaults write com.apple.ActivityMonitor IconType -int 5

# Show all processes in Activity Monitor
defaults write com.apple.ActivityMonitor ShowCategory -int 0

# Sort Activity Monitor results by CPU usage
defaults write com.apple.ActivityMonitor SortColumn -string "CPUUsage"
defaults write com.apple.ActivityMonitor SortDirection -int 0

###############################################################################
# Mac App Store                                                               #
###############################################################################

# Enable the WebKit Developer Tools in the Mac App Store
defaults write com.apple.appstore WebKitDeveloperExtras -bool true

# Enable Debug Menu in the Mac App Store
defaults write com.apple.appstore ShowDebugMenu -bool true

###############################################################################
# Safari
###############################################################################

# Privacy: don’t send search queries to Apple
defaults write com.apple.Safari UniversalSearchEnabled -bool false
defaults write com.apple.Safari SuppressSearchSuggestions -bool true

# Press Tab to highlight each item on a web page
defaults write com.apple.Safari WebKitTabToLinksPreferenceKey -bool true
defaults write com.apple.Safari com.apple.Safari.ContentPageGroupIdentifier.WebKit2TabsToLinks -bool true

# Show the full URL in the address bar (note: this still hides the scheme)
defaults write com.apple.Safari ShowFullURLInSmartSearchField -bool true

# Set Safari’s home page to `about:blank` for faster loading
defaults write com.apple.Safari HomePage -string "about:blank"

# Prevent Safari from opening ‘safe’ files automatically after downloading
defaults write com.apple.Safari AutoOpenSafeDownloads -bool false

# Hide Safari’s bookmarks bar by default
defaults write com.apple.Safari ShowFavoritesBar -bool false

# Hide Safari’s sidebar in Top Sites
defaults write com.apple.Safari ShowSidebarInTopSites -bool false

# Disable Safari’s thumbnail cache for History and Top Sites
defaults write com.apple.Safari DebugSnapshotsUpdatePolicy -int 2

# Enable Safari’s debug menu
defaults write com.apple.Safari IncludeInternalDebugMenu -bool true

# Make Safari’s search banners default to Contains instead of Starts With
defaults write com.apple.Safari FindOnPageMatchesWordStartsOnly -bool false

# Remove useless icons from Safari’s bookmarks bar
defaults write com.apple.Safari ProxiesInBookmarksBar "()"

# Enable the Develop menu and the Web Inspector in Safari
defaults write com.apple.Safari IncludeDevelopMenu -bool true
defaults write com.apple.Safari WebKitDeveloperExtrasEnabledPreferenceKey -bool true
defaults write com.apple.Safari com.apple.Safari.ContentPageGroupIdentifier.WebKit2DeveloperExtrasEnabled -bool true

# Add a context menu item for showing the Web Inspector in web views
defaults write NSGlobalDomain WebKitDeveloperExtras -bool true

###############################################################################
# Google Chrome & Google Chrome Canary                                        #
###############################################################################

# Allow installing user scripts via GitHub Gist or Userscripts.org
defaults write com.google.Chrome ExtensionInstallSources -array "https://gist.githubusercontent.com/" "http://userscripts.org/*"
defaults write com.google.Chrome.canary ExtensionInstallSources -array "https://gist.githubusercontent.com/" "http://userscripts.org/*"

# Disable the all too sensitive backswipe on trackpads
# defaults write com.google.Chrome AppleEnableSwipeNavigateWithScrolls -bool false
# defaults write com.google.Chrome.canary AppleEnableSwipeNavigateWithScrolls -bool false

# Disable the all too sensitive backswipe on Magic Mouse
defaults write com.google.Chrome AppleEnableMouseSwipeNavigateWithScrolls -bool false
defaults write com.google.Chrome.canary AppleEnableMouseSwipeNavigateWithScrolls -bool false

# Use the system-native print preview dialog
defaults write com.google.Chrome DisablePrintPreview -bool true
defaults write com.google.Chrome.canary DisablePrintPreview -bool true

# Expand the print dialog by default
defaults write com.google.Chrome PMPrintingExpandedStateForPrint2 -bool true
defaults write com.google.Chrome.canary PMPrintingExpandedStateForPrint2 -bool true

###############################################################################
# Twitter.app                                                                 #
###############################################################################

# Disable smart quotes as it’s annoying for code tweets
defaults write com.twitter.twitter-mac AutomaticQuoteSubstitutionEnabled -bool false

# Show the app window when clicking the menu bar icon
defaults write com.twitter.twitter-mac MenuItemBehavior -int 1

# Enable the hidden ‘Develop’ menu
defaults write com.twitter.twitter-mac ShowDevelopMenu -bool true

# Open links in the background
defaults write com.twitter.twitter-mac openLinksInBackground -bool true

# Allow closing the ‘new tweet’ window by pressing `Esc`
defaults write com.twitter.twitter-mac ESCClosesComposeWindow -bool true

# Hide the app in the background if it’s not the front-most window
defaults write com.twitter.twitter-mac HideInBackground -bool true

###############################################################################
# Spectacle.app                                                               #
###############################################################################


defaults write com.divisiblebyzero.Spectacle MakeLarger -data <62706c69 73743030 d4010203 04050618 19582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081011 55246e75 6c6cd409 0a0b0c0d 0e0d0f59 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73100080 0280035a 4d616b65 4c617267 6572d212 1314155a 24636c61 73736e61 6d655824 636c6173 73657358 5a4b486f 744b6579 a2161758 5a4b486f 744b6579 584e534f 626a6563 745f100f 4e534b65 79656441 72636869 766572d1 1a1b5472 6f6f7480 0108111a 232d3237 3c424b55 5a62696b 6d6f7a7f 8a939c9f a8b1c3c6 cb000000 00000001 01000000 00000000 1c000000 00000000 00000000 00000000 cd>;
defaults write com.divisiblebyzero.Spectacle MakeSmaller -data <62706c69 73743030 d4010203 04050618 19582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081011 55246e75 6c6cd409 0a0b0c0d 0e0d0f59 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73100080 0280035b 4d616b65 536d616c 6c6572d2 12131415 5a24636c 6173736e 616d6558 24636c61 73736573 585a4b48 6f744b65 79a21617 585a4b48 6f744b65 79584e53 4f626a65 63745f10 0f4e534b 65796564 41726368 69766572 d11a1b54 726f6f74 80010811 1a232d32 373c424b 555a6269 6b6d6f7b 808b949d a0a9b2c4 c7cc0000 00000000 01010000 00000000 001c0000 00000000 00000000 00000000 00ce>;
defaults write com.divisiblebyzero.Spectacle MoveToBottomHalf -data <62706c69 73743030 d4010203 04050619 1a582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081112 55246e75 6c6cd409 0a0b0c0d 0e0f1059 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73111300 8002107d 80035f10 104d6f76 65546f42 6f74746f 6d48616c 66d21314 15165a24 636c6173 736e616d 65582463 6c617373 65735f10 11537065 63746163 6c655368 6f727463 7574a217 185f1011 53706563 7461636c 6553686f 72746375 74584e53 4f626a65 63745f10 0f4e534b 65796564 41726368 69766572 d11b1c54 726f6f74 80010811 1a232d32 373c424b 555a6269 6c6e7072 858a959e b2b5c9d2 e4e7ec00 00000000 00010100 00000000 00001d00 00000000 00000000 00000000 0000ee>;
defaults write com.divisiblebyzero.Spectacle MoveToCenter -data <62706c69 73743030 d4010203 04050618 19582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081011 55246e75 6c6cd409 0a0b0c0d 0e0d0f59 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73100080 0280035c 4d6f7665 546f4365 6e746572 d2121314 155a2463 6c617373 6e616d65 5824636c 61737365 73585a4b 486f744b 6579a216 17585a4b 486f744b 6579584e 534f626a 6563745f 100f4e53 4b657965 64417263 68697665 72d11a1b 54726f6f 74800108 111a232d 32373c42 4b555a62 696b6d6f 7c818c95 9ea1aab3 c5c8cd00 00000000 00010100 00000000 00001c00 00000000 00000000 00000000 0000cf>;
defaults write com.divisiblebyzero.Spectacle MoveToFullscreen -data <62706c69 73743030 d4010203 04050619 1a582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081112 55246e75 6c6cd409 0a0b0c0d 0e0f1059 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73120002 1a008002 107e8003 5f10104d 6f766554 6f46756c 6c736372 65656ed2 13141516 5a24636c 6173736e 616d6558 24636c61 73736573 5f101153 70656374 61636c65 53686f72 74637574 a217185f 10115370 65637461 636c6553 686f7274 63757458 4e534f62 6a656374 5f100f4e 534b6579 65644172 63686976 6572d11b 1c54726f 6f748001 08111a23 2d32373c 424b555a 62696e70 7274878c 97a0b4b7 cbd4e6e9 ee000000 00000001 01000000 00000000 1d000000 00000000 00000000 00000000 f0>;
defaults write com.divisiblebyzero.Spectacle MoveToLeftHalf -data <62706c69 73743030 d4010203 04050619 1a582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081112 55246e75 6c6cd409 0a0b0c0d 0e0f1059 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73111300 8002107b 80035e4d 6f766554 6f4c6566 7448616c 66d21314 15165a24 636c6173 736e616d 65582463 6c617373 65735f10 11537065 63746163 6c655368 6f727463 7574a217 185f1011 53706563 7461636c 6553686f 72746375 74584e53 4f626a65 63745f10 0f4e534b 65796564 41726368 69766572 d11b1c54 726f6f74 80010811 1a232d32 373c424b 555a6269 6c6e7072 8186919a aeb1c5ce e0e3e800 00000000 00010100 00000000 00001d00 00000000 00000000 00000000 0000ea>;
defaults write com.divisiblebyzero.Spectacle MoveToLowerLeft -data <62706c69 73743030 d4010203 04050619 1a582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081112 55246e75 6c6cd409 0a0b0c0d 0e0f1059 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73110b00 8002107d 80035f10 0f4d6f76 65546f4c 6f776572 4c656674 d2131415 165a2463 6c617373 6e616d65 5824636c 61737365 735f1011 53706563 7461636c 6553686f 72746375 74a21718 5f101153 70656374 61636c65 53686f72 74637574 584e534f 626a6563 745f100f 4e534b65 79656441 72636869 766572d1 1b1c5472 6f6f7480 0108111a 232d3237 3c424b55 5a62696c 6e707284 89949db1 b4c8d1e3 e6eb0000 00000000 01010000 00000000 001d0000 00000000 00000000 00000000 00ed>;
defaults write com.divisiblebyzero.Spectacle MoveToLowerRight -data <62706c69 73743030 d4010203 04050619 1a582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081112 55246e75 6c6cd409 0a0b0c0d 0e0f1059 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73110b00 8002107c 80035f10 104d6f76 65546f4c 6f776572 52696768 74d21314 15165a24 636c6173 736e616d 65582463 6c617373 65735f10 11537065 63746163 6c655368 6f727463 7574a217 185f1011 53706563 7461636c 6553686f 72746375 74584e53 4f626a65 63745f10 0f4e534b 65796564 41726368 69766572 d11b1c54 726f6f74 80010811 1a232d32 373c424b 555a6269 6c6e7072 858a959e b2b5c9d2 e4e7ec00 00000000 00010100 00000000 00001d00 00000000 00000000 00000000 0000ee>;
defaults write com.divisiblebyzero.Spectacle MoveToNextDisplay -data <62706c69 73743030 d4010203 04050619 1a582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081112 55246e75 6c6cd409 0a0b0c0d 0e0f1059 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73111300 80021030 80035f10 114d6f76 65546f4e 65787444 6973706c 6179d213 1415165a 24636c61 73736e61 6d655824 636c6173 7365735f 10115370 65637461 636c6553 686f7274 637574a2 17185f10 11537065 63746163 6c655368 6f727463 7574584e 534f626a 6563745f 100f4e53 4b657965 64417263 68697665 72d11b1c 54726f6f 74800108 111a232d 32373c42 4b555a62 696c6e70 72868b96 9fb3b6ca d3e5e8ed 00000000 00000101 00000000 0000001d 00000000 00000000 00000000 000000ef>;
defaults write com.divisiblebyzero.Spectacle MoveToNextThird -data <62706c69 73743030 d4010203 04050618 19582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081011 55246e75 6c6cd409 0a0b0c0d 0e0d0f59 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73100080 0280035f 100f4d6f 7665546f 4e657874 54686972 64d21213 14155a24 636c6173 736e616d 65582463 6c617373 6573585a 4b486f74 4b6579a2 1617585a 4b486f74 4b657958 4e534f62 6a656374 5f100f4e 534b6579 65644172 63686976 6572d11a 1b54726f 6f748001 08111a23 2d32373c 424b555a 62696b6d 6f818691 9aa3a6af b8cacdd2 00000000 00000101 00000000 0000001c 00000000 00000000 00000000 000000d4>;
defaults write com.divisiblebyzero.Spectacle MoveToPreviousDisplay -data <62706c69 73743030 d4010203 04050618 19582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081011 55246e75 6c6cd409 0a0b0c0d 0e0d0f59 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73100080 0280035f 10154d6f 7665546f 50726576 696f7573 44697370 6c6179d2 12131415 5a24636c 6173736e 616d6558 24636c61 73736573 585a4b48 6f744b65 79a21617 585a4b48 6f744b65 79584e53 4f626a65 63745f10 0f4e534b 65796564 41726368 69766572 d11a1b54 726f6f74 80010811 1a232d32 373c424b 555a6269 6b6d6f87 8c97a0a9 acb5bed0 d3d80000 00000000 01010000 00000000 001c0000 00000000 00000000 00000000 00da>;
defaults write com.divisiblebyzero.Spectacle MoveToPreviousThird -data <62706c69 73743030 d4010203 04050618 19582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081011 55246e75 6c6cd409 0a0b0c0d 0e0d0f59 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73100080 0280035f 10134d6f 7665546f 50726576 696f7573 54686972 64d21213 14155a24 636c6173 736e616d 65582463 6c617373 6573585a 4b486f74 4b6579a2 1617585a 4b486f74 4b657958 4e534f62 6a656374 5f100f4e 534b6579 65644172 63686976 6572d11a 1b54726f 6f748001 08111a23 2d32373c 424b555a 62696b6d 6f858a95 9ea7aab3 bcced1d6 00000000 00000101 00000000 0000001c 00000000 00000000 00000000 000000d8>;
defaults write com.divisiblebyzero.Spectacle MoveToRightHalf -data <62706c69 73743030 d4010203 04050619 1a582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081112 55246e75 6c6cd409 0a0b0c0d 0e0f1059 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73111300 8002107c 80035f10 0f4d6f76 65546f52 69676874 48616c66 d2131415 165a2463 6c617373 6e616d65 5824636c 61737365 735f1011 53706563 7461636c 6553686f 72746375 74a21718 5f101153 70656374 61636c65 53686f72 74637574 584e534f 626a6563 745f100f 4e534b65 79656441 72636869 766572d1 1b1c5472 6f6f7480 0108111a 232d3237 3c424b55 5a62696c 6e707284 89949db1 b4c8d1e3 e6eb0000 00000000 01010000 00000000 001d0000 00000000 00000000 00000000 00ed>;
defaults write com.divisiblebyzero.Spectacle MoveToTopHalf -data <62706c69 73743030 d4010203 04050619 1a582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081112 55246e75 6c6cd409 0a0b0c0d 0e0f1059 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73111300 8002107e 80035d4d 6f766554 6f546f70 48616c66 d2131415 165a2463 6c617373 6e616d65 5824636c 61737365 735f1011 53706563 7461636c 6553686f 72746375 74a21718 5f101153 70656374 61636c65 53686f72 74637574 584e534f 626a6563 745f100f 4e534b65 79656441 72636869 766572d1 1b1c5472 6f6f7480 0108111a 232d3237 3c424b55 5a62696c 6e707280 859099ad b0c4cddf e2e70000 00000000 01010000 00000000 001d0000 00000000 00000000 00000000 00e9>;
defaults write com.divisiblebyzero.Spectacle MoveToUpperLeft -data <62706c69 73743030 d4010203 04050619 1a582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081112 55246e75 6c6cd409 0a0b0c0d 0e0f1059 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73110b00 8002107b 80035f10 0f4d6f76 65546f55 70706572 4c656674 d2131415 165a2463 6c617373 6e616d65 5824636c 61737365 735f1011 53706563 7461636c 6553686f 72746375 74a21718 5f101153 70656374 61636c65 53686f72 74637574 584e534f 626a6563 745f100f 4e534b65 79656441 72636869 766572d1 1b1c5472 6f6f7480 0108111a 232d3237 3c424b55 5a62696c 6e707284 89949db1 b4c8d1e3 e6eb0000 00000000 01010000 00000000 001d0000 00000000 00000000 00000000 00ed>;
defaults write com.divisiblebyzero.Spectacle MoveToUpperRight -data <62706c69 73743030 d4010203 04050619 1a582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081112 55246e75 6c6cd409 0a0b0c0d 0e0f1059 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73110b00 8002107e 80035f10 104d6f76 65546f55 70706572 52696768 74d21314 15165a24 636c6173 736e616d 65582463 6c617373 65735f10 11537065 63746163 6c655368 6f727463 7574a217 185f1011 53706563 7461636c 6553686f 72746375 74584e53 4f626a65 63745f10 0f4e534b 65796564 41726368 69766572 d11b1c54 726f6f74 80010811 1a232d32 373c424b 555a6269 6c6e7072 858a959e b2b5c9d2 e4e7ec00 00000000 00010100 00000000 00001d00 00000000 00000000 00000000 0000ee>;
defaults write com.divisiblebyzero.Spectacle "NSWindow Frame SUUpdateAlert" -data "712 648 620 392 0 0 2048 1257 ";
defaults write com.divisiblebyzero.Spectacle RedoLastMove -data <62706c69 73743030 d4010203 04050618 19582476 65727369 6f6e5824 6f626a65 63747359 24617263 68697665 72542474 6f701200 0186a0a4 07081011 55246e75 6c6cd409 0a0b0c0d 0e0d0f59 6d6f6469 66696572 73546e61 6d65576b 6579436f 64655624 636c6173 73100080 0280035c 5265646f 4c617374 4d6f7665 d2121314 155a2463 6c617373 6e616d65 5824636c 61737365 73585a4b 486f744b 6579a216 17585a4b 486f744b 6579584e 534f626a 6563745f 100f4e53 4b657965 64417263 68697665 72d11a1b 54726f6f 74800108 111a232d 32373c42 4b555a62 696b6d6f 7c818c95 9ea1aab3 c5c8cd00 00000000 00010100 00000000 00001c00 00000000 00000000 00000000 0000cf>;
defaults write com.divisiblebyzero.Spectacle SUEnableAutomaticChecks -int 1;
defaults write com.divisiblebyzero.Spectacle SUHasLaunchedBefore -int 1;

###############################################################################
# Terminal & iTerm 2                                                          #
###############################################################################

# Don’t display the annoying prompt when quitting iTerm
defaults write com.googlecode.iterm2 PromptOnQuit -bool false

# Set pereferencefile custom folder
defaults write com.googlecode.iterm2 PrefsCustomFolder -string "${HOME}/Dropbox/Configurations/iTerm2"

###############################################################################
# Alfred
###############################################################################

defaults write com.runningwithcrayons.Alfred-Preferences syncfolder -string "~/Dropbox/Configurations/Alfred"

###############################################################################
# Google Japanese Input
###############################################################################

ln -sf ~/Dropbox/Configurations/GoogleJapaneseInput/JapaneseInput ~/Library/Application\ Support/Google/JapaneseInput

###############################################################################
# Karabiner
###############################################################################

ln -sf ~/Dropbox/Configurations/Karabiner/private.xml ~/Library/Application\ Support/Karabiner/private.xml

defaults write org.pqrs.Karabiner SUHasLaunchedBefore -int 1
defaults write org.pqrs.Karabiner configList -array '{
        appendIndex = 1;
        identify = "config_0000000000_000000";
        name = Default;
    }'
defaults write org.pqrs.Karabiner config_0000000000_000000 -dict \
        notsave.automatically_enable_keyboard_device 1 \
        notsave.automatically_enable_pointing_device 1 \
        option.emacsmode_controlPNBF_ex_private 1 \
        option.emacsmode_controlPNBF_ex_private_for_jetbrain_ides 1 \
        option.emacsmode_controlPNBF_ex_private_for_jetbrains_ides 1 \
        option.emacsmode_controlS_private 1 \
        option.emacsmode_controlW_private 1 \
        option.emacsmode_controlY_private 1 \
        remap.altC2altCommandControlC_for_evernote 1 \
        remap.app_jetbrains_ides_function2functional 1 \
        remap.app_jetbrains_ides_functional2function 1 \
        remap.app_word_emacs_bindings 1 \
        remap.commandM2controlCommandM_for_evernote 1 \
        remap.commandR2forwarddelete 1 \
        remap.controlH2backspace_for_line 1 \
        remap.controlJ2escape_and_eisuu_private 1 \
        remap.controlJ2return_private 1 \
        remap.dashlane_copy_password_to_clipboard 1 \
        remap.jis_command2eisuukana_prefer_command 1 \
        remap.swap_colon_and_semicolon_private_for_sublime_text 1 \
        remap.switchCommandFWithCommandAltF 1 \
        remap.switchCommandFWithCommandAltF_for_evernote 1 \
        remap.tweetbot_switch_account_1 1 \
        remap.tweetbot_switch_account_2 1 \
        repeat.initial_wait 200 \
        repeat.wait 30 \

###############################################################################
# Flux
###############################################################################

defaults write org.herf.Flux lateColorTemp -int 2700;

###############################################################################
# FormatMatch
###############################################################################

defaults write dutch.apps.formatmatch enableHotKey -int 1
defaults write dutch.apps.formatmatch shortcut -array {
  characters = D;
  keyCode = 2;
  modifierFlags = 1441792;
}

###############################################################################
# Day-O
###############################################################################

defaults write com.shauninman.Day-O firstRun -int 0
defaults write com.shauninman.Day-O format -string "E H:mm"

###############################################################################
# Pocket
###############################################################################

defaults write com.readitlater.PocketMac NSUserKeyEquivalents -array {
  Twitter = "@t";
}
defaults write com.readitlater.PocketMac TextFontSize -int 21
defaults write com.readitlater.PocketMac TextMode -string night

###############################################################################
# App Cleaner
###############################################################################

defaults write net.freemacsoft.AppCleaner ProtectOpenedApps = 0;
defaults write net.freemacsoft.AppCleaner SUEnableAutomaticChecks = 1;
defaults write net.freemacsoft.AppCleaner SUHasLaunchedBefore = 1;
defaults write net.freemacsoft.AppCleaner SUSendProfileInfo = 0;

###############################################################################
# Android Studio
###############################################################################

for app in ~/Applications/Android\ Studio.app /Applications/Android\ Studio.app;
do
  ver=$(cat $app/Contents/Info.plist | grep 'Android Studio [^<]' | sed 's/.\+Android Studio \([0-9]\.[0-9]\).\+/\1/')
  path_lib="~/Library/Preferences/AndroidStudio$ver"
  mkdir $path_lib
  ln -sf ~/Dropbox/Configurations/AndroidStudio/studio.vmoptions $path_lib
done

###############################################################################
# Intellij Idea
###############################################################################

for app in ~/Applications/IntelliJ\ IDEA* /Applications/Intellij\ IDEA*
do
  ver=$(echo `basename $app` | sed 's/IntelliJ IDEA \([0-9]\+\)\.app/\1/')
  path_lib="~/Library/Preferences/IntelliJIdea$ver"
  mkdir $path_lib
  ln -sf ~/Dropbox/Configurations/IntellijIdea/idea.vmoptions $path_lib
done

###############################################################################
# Gradle
###############################################################################

ln -sf ~/dotfiles/gradle.properties ~/.gradle/gradle.properties

###############################################################################
# PopClip
###############################################################################

url="http://hitoriblog.com/wp-content/uploads/2014/02/PopClipPopUp.scpt_.zip"
name=`basename $url`
curl -O $url; unzip $name PopClipPopUp.scpt -d ~/Applications; /bin/rm $name

defaults write com.pilotmoon.popclip CombinedItemOrder -data (
  openlink,
  search,
  cut,
  copy,
  paste,
  revealfile,
  openmail,
  lookup,
  "ext-com.pilotmoon.popclip.extension.amazon-search",
  "ext-com.pilotmoon.popclip.extension.pronounce",
  "ext-com.pilotmoon.popclip.extension.say",
  "ext-com.my_name.popclip.extension.open-in-weblio",
  "ext-com.pilotmoon.popclip.extension.dash",
  "ext-com.pilotmoon.popclip.extension.evernote"
)
defaults write com.pilotmoon.popclip ExtensionAdded -int 1
defaults write com.pilotmoon.popclip HasRunBefore -int 1;
defaults write com.pilotmoon.popclip HasShownWelcome -int 1;
defaults write com.pilotmoon.popclip "enable-action-copy" -int 0;
defaults write com.pilotmoon.popclip "enable-action-cut" -int 0;
defaults write com.pilotmoon.popclip "enable-action-ext-com.my_name.popclip.extension.open-in-weblio" -int 1;
defaults write com.pilotmoon.popclip "enable-action-ext-com.pilotmoon.popclip.extension.amazon-search" -int 1;
defaults write com.pilotmoon.popclip "enable-action-ext-com.pilotmoon.popclip.extension.dash" -int 1;
defaults write com.pilotmoon.popclip "enable-action-ext-com.pilotmoon.popclip.extension.evernote" -int 1;
defaults write com.pilotmoon.popclip "enable-action-ext-com.pilotmoon.popclip.extension.pronounce" -int 0;
defaults write com.pilotmoon.popclip "enable-action-ext-com.pilotmoon.popclip.extension.say" -int 0;
defaults write com.pilotmoon.popclip "enable-action-openmail" -int 0;
defaults write com.pilotmoon.popclip "enable-action-paste" -int 0;
defaults write com.pilotmoon.popclip "enable-action-revealfile" -int 0;
defaults write com.pilotmoon.popclip "extension#com.pilotmoon.popclip.extension.amazon-search#site" -string "amazon.co.jp";

###############################################################################
# Evernote
###############################################################################

defaults write com.evernote.Evernote runHelperAtLogin -int 1

#### Evernote Helper

defaults write com.evernote.EvernoteHelper "ShortcutRecorder newnote" -array {
  keyChars = "\005";
  keyCharsIgnoringModifiers = E;
  keyCode = 14;
  modifierFlags = 1441792;
  modifiers = 4864;
};

defaults write com.evernote.EvernoteHelper "ShortcutRecorder newnotewindow" -array {
  keyCode = "-1";
  modifierFlags = 0;
  modifiers = 0;
};

defaults write com.evernote.EvernoteHelper "ShortcutRecorder pasteboard" -array {
  keyCode = "-1";
  modifierFlags = 0;
  modifiers = 0;
};

defaults write com.evernote.EvernoteHelper "ShortcutRecorder screenshot" -array {
  keyCode = "-1";
  modifierFlags = 0;
  modifiers = 0;
};

defaults write com.evernote.EvernoteHelper "ShortcutRecorder search" -array {
  keyCode = "-1";
  modifierFlags = 0;
  modifiers = 0;
};
defaults write com.evernote.EvernoteHelper showsStatusBarItem -int 1

###############################################################################
# BetterTouchTool
###############################################################################

mkdir ~/Library/Application\ Support/BetterTouchTool
ln -sf ~/Dropbox/Configurations/BetterTouchTool/bttdata2 ~/Library/Application\ Support/BetterTouchTool/bttdata2

###############################################################################
# Tweetbot
###############################################################################

# Bypass the annoyingly slow t.co URL shortener
defaults write com.tapbots.TweetbotMac OpenURLsDirectly -bool true

###############################################################################
# Kill affected applications                                                  #
###############################################################################

for app in "Activity Monitor" "Address Book" "Calendar" "Contacts" "cfprefsd" \
  "Dock" "Finder" "Google Chrome" "Google Chrome Canary" "Mail" "Messages" \
  "Opera" "Safari" "SizeUp" "Spectacle" "SystemUIServer" "Terminal" \
  "Transmission" "Twitter" "iCal" "Dash" "Karabiner" "Android\ Studio" "Intellij\ idea14" \
  "GoogleJapaneseInput" "Alfred" "PopClip" "Evernote" "Caffeine" "Pocket" \
  "Flux" "AppCleaner"; do
  killall "${app}" > /dev/null 2>&1
done
echo "Done. Note that some of these changes require a logout/restart to take effect."
